/**-----------------------------------------------------------------------------------------
* Copyright Â© 2023 Progress Software Corporation. All rights reserved.
* Licensed under commercial license. See LICENSE.md in the package root for more information
*-------------------------------------------------------------------------------------------*/
(function(l,f){typeof exports=="object"&&typeof module<"u"?f(exports,require("react"),require("prop-types"),require("@progress/kendo-drawing"),require("@progress/kendo-file-saver"),require("react-dom/server"),require("@progress/kendo-react-common"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","prop-types","@progress/kendo-drawing","@progress/kendo-file-saver","react-dom/server","@progress/kendo-react-common","react-dom"],f):(l=typeof globalThis<"u"?globalThis:l||self,f(l.KendoReactPdf={},l.React,l.PropTypes,l.KendoDrawing,l.KendoFileSaver,l.ReactDOMServer,l.KendoReactCommon,l.ReactDOM))})(this,function(l,f,e,C,G,J,Y,Z){"use strict";"use client";function D(n){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const r in n)if(r!=="default"){const o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}return t.default=n,Object.freeze(t)}const g=D(f),y=D(J),M=D(Z);class v extends g.Component{render(){return null}}v.propTypes={left:e.oneOfType([e.number,e.string]),top:e.oneOfType([e.number,e.string]),right:e.oneOfType([e.number,e.string]),bottom:e.oneOfType([e.number,e.string])};const j=["bottom","left","right","top"];function O(n){const t=g.Children.toArray(n.children).find(r=>r&&r.type===v);return t?T(t):n.margin}function T(n){const t={};for(let r=0;r<j.length;r++){const o=j[r],i=n.props[o];i!==void 0&&(t[o]=i)}return t}const P="export.pdf",ee="KendoReact PDF Generator";class E{constructor(t,r,o,i,s={}){this.drawDOM=t,this.exportPDF=r,this.saveAs=o,this.domElement=i,this.options=s,this.convertPageTemplateToHtml=c=>`<span>${y.renderToStaticMarkup(g.createElement(this.options.pageTemplate,{pageNum:c.pageNum,totalPages:c.totalPages}))}</span>`}savePDF(t){const r=this.drawDOM(this.domElement,this.getDrawOptions()).then(o=>this.exportPDF(o,this.getPDFOptions())).then(o=>this.saveAs(o,this.options.fileName||P,this.getSaveOptions()));t&&r.then(t,t)}getDrawOptions(){return{avoidLinks:this.options.avoidLinks,forcePageBreak:this.options.forcePageBreak,keepTogether:this.options.keepTogether,margin:this.options.margin,paperSize:this.options.paperSize,landscape:this.options.landscape,repeatHeaders:this.options.repeatHeaders,scale:this.options.scale,template:this.options.pageTemplate&&this.convertPageTemplateToHtml}}getPDFOptions(){return{author:this.options.author,creator:this.options.creator||ee,date:this.options.date,imgDPI:this.options.imageResolution,keywords:this.options.keywords,landscape:this.options.landscape,margin:this.options.margin,multiPage:!0,paperSize:this.options.paperSize,producer:this.options.producer,subject:this.options.subject,title:this.options.title}}getSaveOptions(){return{forceProxy:this.options.forceProxy,proxyData:this.options.proxyData,proxyTarget:this.options.proxyTarget,proxyURL:this.options.proxyURL}}}const te={name:"@progress/kendo-react-pdf",productName:"KendoReact",productCodes:["KENDOUIREACT","KENDOUICOMPLETE"],publishDate:0,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-react-ui/components/my-license/"};class $ extends g.Component{constructor(t){super(t),this.rootElForPDF=null,Y.validatePackage(te)}render(){return g.createElement("div",{ref:t=>{this.rootElForPDF=t}},this.props.children)}save(t){new E(C.drawDOM,C.exportPDF,G.saveAs,this.rootElForPDF,this.getOptions()).savePDF(t)}getOptions(){return Object.assign({},this.props,{margin:O(this.props)})}}$.propTypes={author:e.string,avoidLinks:e.oneOfType([e.bool,e.string]),forcePageBreak:e.string,keepTogether:e.string,creator:e.string,date:e.instanceOf(Date),imageResolution:e.number,fileName:e.string,forceProxy:e.bool,keywords:e.string,landscape:e.bool,margin:e.oneOfType([e.string,e.number,e.shape({left:e.oneOfType([e.number,e.string]),top:e.oneOfType([e.number,e.string]),right:e.oneOfType([e.number,e.string]),bottom:e.oneOfType([e.number,e.string])})]),pageTemplate:e.any,paperSize:e.any,repeatHeaders:e.bool,scale:e.number,proxyData:e.any,proxyURL:e.string,proxyTarget:e.string,producer:e.string,subject:e.string,title:e.string};function x(n,t={},r){new E(C.drawDOM,C.exportPDF,G.saveAs,n,t).savePDF(r)}const S={},q=n=>String(n).trim().split(" "),ne=(n,t)=>{const r=q(t);return!!q(n.className).find(o=>r.indexOf(o)>=0)},h=n=>t=>ne(t,n),W=n=>(S[n]||(S[n]=t=>String(t.nodeName).toLowerCase()===n.toLowerCase()),S[n]),u=(n,t,r=!0)=>{if(n){if(r&&t(n))return n;for(n=n.firstChild;n;){if(n.nodeType===1){const o=u(n,t);if(o)return o}n=n.nextSibling}}},_="k-grid-header",K="k-grid-footer",re=W("TABLE"),B=n=>n?"locked":"wrap";let oe=class{constructor(t){this.element=t,this.list=u(t,h("k-grid-container"))}content(t){return u(this.list,h(`k-grid-content${t?"-locked":""}`))}header(t){return this.headerWrap=this.headerWrap||u(this.element,h(_)),u(this.headerWrap,h(`${_}-${B(t)}`))}footer(t){return this.footerWrap=this.footerWrap||u(this.element,h(K)),u(this.footerWrap,h(`${K}-${B(t)}`))}table(){return u(this.element,re)}};const I="k-first",ie="k-grid-header",se="k-grid-footer",U=(n,t)=>{const r=t.length;for(let o=0;o<r;o++)n.appendChild(t[o].cloneNode(!0))},F=n=>{const t=document.createElement("div");return t.className="k-grid k-grid-md",t.appendChild(n),t},k=n=>{const t=n.length,r=n[0].cloneNode(!0),o=r.rows.length;if(t>1)for(let i=0;i<o;i++)for(let s=1;s<t;s++)U(r.rows[i],n[s].rows[i].cells);return r},ae=(n,t)=>{if(t.length>1&&n.rows.length>1)for(let r=1;r<n.rows.length;r++){const o=t[0].rows[r].cells.length,i=n.rows[r].cells[o];String(i.className).indexOf(I)===-1&&(i.className+=` ${I}`)}},H=(n,t,r,o)=>{const i=document.createElement("table"),s=n[0].cloneNode(!0);for(let a=1;a<n.length;a++)U(s,n[a].querySelectorAll("col"));const c=k(t),d=k(r);if(c.className=ie,ae(c,t),i.appendChild(s),i.appendChild(c),i.appendChild(d),o.length){const a=k(o);a.className=se,i.appendChild(a)}return F(i)},ce=n=>{const t=new oe(n),r=t.content();let o;if(r){const i=[r.querySelector("colgroup")],s=[t.header().querySelector("thead")],c=[r.querySelector("tbody")],d=t.footer(),a=d?[d.querySelector("tfoot")]:[];o=H(i,s,c,a)}else o=F(t.table().cloneNode(!0));return o};function le(n){return(t,r={},o,i,s)=>de(n,t,r,o,i,s)}function de(n,t,r={},o,i,s){let c,d,a;b();function b(){c=document.createElement("div"),c.setAttribute("style","position:absolute; left: -5000px; top: 0px;"),d=document.createElement("div"),c.appendChild(d),document.body.appendChild(c),M.render(A(),d,w)}function w(){n(N(),r,L)}function L(){document.body.removeChild(c),document.body.removeChild(a),c=a=void 0,o&&o()}function N(){a=document.createElement("div"),a.className="k-grid-pdf-export-element";const m=ce(d);return a.appendChild(m),document.body.appendChild(a),m}function A(){const m=i&&{data:i,total:i.length,pageSize:i.length,skip:0},R={style:Object.assign({},t.props.style,{width:"1000px"})},p=Object.assign({},m,R);if(s&&s.length>0){const pe=ue(t);return g.cloneElement(t,p,s.concat(pe))}else return g.cloneElement(t,p)}}function ue(n){return g.Children.toArray(n.props.children).filter(t=>t&&t.type&&t.type.displayName!=="KendoReactGridColumn")}class z extends g.Component{constructor(t){super(t),this.saveGridPDF=le(this.getSavePDF())}render(){return null}save(t,r){this.saveGridPDF(this.getGrid(),Object.assign({},this.props,{margin:O(this.props)}),r,t,this.getCustomColumns())}getSavePDF(){return x}getGrid(){return g.Children.toArray(this.props.children).find(t=>t&&t.type.displayName==="KendoReactGrid")}getCustomColumns(){return g.Children.toArray(this.props.children).filter(t=>t&&t.type.displayName==="KendoReactGridColumn")}}z.propTypes={author:e.string,avoidLinks:e.oneOfType([e.bool,e.string]),forcePageBreak:e.string,keepTogether:e.string,creator:e.string,date:e.instanceOf(Date),imageResolution:e.number,fileName:e.string,forceProxy:e.bool,keywords:e.string,landscape:e.bool,margin:e.oneOfType([e.string,e.number,e.shape({left:e.oneOfType([e.number,e.string]),top:e.oneOfType([e.number,e.string]),right:e.oneOfType([e.number,e.string]),bottom:e.oneOfType([e.number,e.string])})]),pageTemplate:e.any,paperSize:e.any,repeatHeaders:e.bool,scale:e.number,proxyData:e.any,proxyURL:e.string,proxyTarget:e.string,producer:e.string,subject:e.string,title:e.string};const Q="k-grid-header",V="k-grid-footer",ge=W("TABLE");class he{constructor(t){this.element=t,this.list=u(t,h("k-grid"))}content(){return u(this.list,h("k-grid"))}header(){return this.headerWrap=this.headerWrap||u(this.element,h(Q)),u(this.headerWrap,h(`${Q}`))}footer(){return this.footerWrap=this.footerWrap||u(this.element,h(V)),u(this.footerWrap,h(`${V}`))}table(){return u(this.element,ge)}}const me=n=>{const t=new he(n),r=t.content();let o,i=t.header();if(i.childNodes.length>1&&i.removeChild(i.childNodes[1]),i.childNodes[0].childNodes.forEach(s=>s.style.top=0),r){const s=[r.querySelector("colgroup")],c=[i],d=[r.querySelector("tbody")],a=t.footer(),b=a?[a.querySelector("tfoot")]:[];o=H(s,c,d,b)}else o=F(t.table().cloneNode(!0));return o};function fe(n){return(t,r={},o,i,s)=>be(n,t,r,o,i,s)}function be(n,t,r={},o,i,s){let c,d,a;b();function b(){c=document.createElement("div"),c.setAttribute("style","position:absolute; left: -5000px; top: 0px;"),d=document.createElement("div"),c.appendChild(d),document.body.appendChild(c),M.render(A(),d,w)}function w(){n(N(),r,L)}function L(){document.body.removeChild(c),document.body.removeChild(a),c=a=void 0,o&&o()}function N(){a=document.createElement("div"),a.className="k-treelist-pdf-export-element";const m=me(d);return a.appendChild(m),document.body.appendChild(a),a}function A(){const m=r.allPages&&i?{data:i,take:Number.MAX_VALUE,skip:0}:{},R={style:Object.assign({},t.props.style,{width:"1000px"})},p=Object.assign({},m,R);return s&&s.length>0?g.cloneElement(t,Object.assign({},p,{columns:s})):g.cloneElement(t,p)}}class X extends g.Component{constructor(t){super(t),this.saveTreeListPDF=fe(this.getSavePDF())}render(){return null}save(t,r,o){this.saveTreeListPDF(this.getTreeList(),Object.assign({},this.props,{margin:O(this.props)}),o,t,r||[])}getSavePDF(){return x}getTreeList(){const t=this.props.children;if(t&&t.props.data&&t.props.columns)return this.props.children}}X.propTypes={author:e.string,avoidLinks:e.oneOfType([e.bool,e.string]),forcePageBreak:e.string,keepTogether:e.string,creator:e.string,date:e.instanceOf(Date),imageResolution:e.number,fileName:e.string,forceProxy:e.bool,keywords:e.string,landscape:e.bool,margin:e.oneOfType([e.string,e.number,e.shape({left:e.oneOfType([e.number,e.string]),top:e.oneOfType([e.number,e.string]),right:e.oneOfType([e.number,e.string]),bottom:e.oneOfType([e.number,e.string])})]),pageTemplate:e.any,paperSize:e.any,repeatHeaders:e.bool,scale:e.number,proxyData:e.any,proxyURL:e.string,proxyTarget:e.string,producer:e.string,subject:e.string,title:e.string,allPages:e.bool},l.GridPDFExport=z,l.KendoDrawingAdapter=E,l.PDFExport=$,l.PDFMargin=v,l.TreeListPDFExport=X,l.getPageMargin=O,l.savePDF=x,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
